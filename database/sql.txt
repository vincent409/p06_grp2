-- Create the Role table
CREATE TABLE Role (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(20) NOT NULL
);

-- Create the Status table
CREATE TABLE Status (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(20) NOT NULL
);

-- Create the Profile table
CREATE TABLE Profile (
    id INT PRIMARY KEY AUTO_INCREMENT,
    role_id INT NOT NULL,
    name VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL,
    phone_number INT,
    department VARCHAR(255) NOT NULL,
    first_logon INT,
    FOREIGN KEY (role_id) REFERENCES Role(id)
);

-- Create the User table
CREATE TABLE User (
    id INT PRIMARY KEY AUTO_INCREMENT,
    password VARCHAR(255) NOT NULL,
    profile_id INT NOT NULL,
    FOREIGN KEY (profile_id) REFERENCES Profile(id)
);

-- Create the Equipment table
CREATE TABLE Equipment (
    id INT PRIMARY KEY AUTO_INCREMENT,
    status_id INT NOT NULL,
    name VARCHAR(255) NOT NULL,
    type VARCHAR(255) NOT NULL,
    purchase_date TIMESTAMP NOT NULL,
    model_number VARCHAR(255) NOT NULL,
    FOREIGN KEY (status_id) REFERENCES Status(id)
);

-- Create the Loan table
CREATE TABLE Loan (
    id INT PRIMARY KEY AUTO_INCREMENT,
    profile_id INT NOT NULL,
    equipment_id INT NOT NULL,
    FOREIGN KEY (profile_id) REFERENCES Profile(id),
    FOREIGN KEY (equipment_id) REFERENCES Equipment(id)
);

-- Create the Usage_Log table
CREATE TABLE Usage_Log (
    id INT PRIMARY KEY AUTO_INCREMENT,
    equipment_id INT NOT NULL,
    log_details VARCHAR(255) NOT NULL,
    assigned_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
    returned_date TIMESTAMP NULL,
    FOREIGN KEY (equipment_id) REFERENCES Equipment(id)
);